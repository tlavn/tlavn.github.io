<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writing</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>
<body>

    <!-- TIMEOUT  NOTI-->
    <div id="timeout" class="hide">
        <div class="timeout-container">
            <div class="timeout-description">
                    <p style="font-size: 24px; font-weight: 700; text-align: center;">TIME OUT</p>
                <br>
                <p>Time has expired for this Writing Test and your answers have been submitted successfully. </p>
                <br>
                <!-- <div class="timeout-btn" onclick="window.location.href = 'listening.html'" >
                    Continue
                </div>  -->
            </div>
        </div>
    </div>

    <!-- COMPLETED  NOTI-->
    <div id="completed" class="hide" style="z-index: 13;">
        <div class="timeout-container">
            <div class="timeout-description">
                    <p style="font-size: 24px; font-weight: 700; text-align: center;">SUCESSFULLY</p>
                <br>
                <p>Your answers have been submitted successfully.</p>
                <br>
                <!-- <div class="timeout-btn" onclick="window.location.href = 'listening.html'">
                    Continue
                </div>  -->
            </div>
        </div>
    </div>

     


    <!-- <form action="https://sheetdb.io/api/v1/8vtuvzrxkjxxn" method="POST" id="sheetdb-form">
        <input id="time" name="data[Time]" type="hidden" form="sheetdb-form"  />
    </form> -->
    <!-- CONFIRM TO START NOTI-->
    <!-- <div id="confirm-start" style="display: none;"> -->
    <div id="confirm-start">
        <div class="confirm-start-container">
            <div class="start-description">
                <p style="font-size: 24px; font-weight: 700; text-align: center; color: #C0392B;">IELTS BEGINNER</p>
            <p style="font-size: 18px;"><b> Writing Final Test</b> </p> <br>
            <p style="text-align: justify;">
                <b>Format:</b>  There are three tasks and all must be completed.
                <br><br>
                <b>Timing:</b>  30 minutes
                <br><br>
                <b>No. of questions:</b>  10
                <br><br>
                <b>Answering:</b>  Answers must be given on the answer sheet and must be written in full. Notes or bullet points are not acceptable as answers.
                <br>
            </p>
            <br>
            <p style="text-align: justify; color:#192A56 !important;">
                <img class="icon" src="assets/icon/warning.svg" style="display: inline-block; line-height: 30px; height: 28px !important;">
                <span style="color:#192A56 !important; vertical-align:middle;"> <b> The countdown timer will begin when you click on Start.</b>  </span> 
            </p>
            
            </div>
            <br>

            
            <div class="info-submit">
                <!-- INPUT NAME -->
                <div class="submit-start-grid">
                    <label for="name">
                        <p>Name</p> 
                        <input autocomplete="new-password" type="text" form="sheetdb-form" name="data[Name]" placeholder="Enter your name" onkeypress="return event.keyCode != 13;">
                    </label>
                </div>
                
                <!-- INPUT KEY -->
                <div class="submit-start-grid"> 
                    <label for="key">
                        <p>Password</p>
                        <input id="password" type="password" placeholder="Enter a private key" onkeypress="return event.keyCode != 13;">
                    </label>
                
                </div>
                <!-- CHECK KEY AND START -->
                <div>
                    <label for="start">
                        <p></p>
                        <input id="startbtn" type="button" value="Start" class="start-btn">
                    </label>
                </div>

            </div>
            
        </div>
    </div>
  
    <!-- HEADER -->
        <header class="header">
            <div class="header-container">
                <div class="skill-name">
                    WRITING FINAL TEST
                </div>
                
                <div class="timer">
                    <img style="height: 20px; vertical-align:middle;" src="assets/icon/time.svg" alt="">
                    <b>
                        <span id="timer" style="font-size: 20px !important;">30:00</span>
                    </b>
                   
                </div>
                <div class="event-name">
                    IELTS BEGINNER
                </div>
            </div>
        </header>



    <!-- CONTENT -->
     <section id="content">

         

        <!-- RIGHT CONTENT  -->
        <section id="right-content" class="right-content">
            <div class="right-content-container">
                <!-- TASK 1-->
                <div id="part1">
                    <p class="passage-title">task 1 - complete the sentences</p>
                    <p class="passage-description">Complete the following sentences  <b>with your own ideas.</b> </p>
                    <!-- Question 1 -->
                    <label for="question1" style="margin-left: 16px;">
                        <span class="number" style="margin-bottom: 8px; margin-top: 8px;">1</span> Although people have tried a lot to protect the environment, ...............
                        <textarea id="question1" form="sheetdb-form"  spellcheck="false" name="data[1]" placeholder="Although people have tried a lot to protect the environment, ..............."></textarea>
                        </textarea>
                    </label> <br>

                    <!-- Question 2 -->
                    <label for="question2" style="margin-left: 16px;">
                        <span class="number" style="margin-bottom: 8px; margin-top: 8px;">2</span> Because a lot of foreign tourists visited Vietnam in 2022, ...............
                        <textarea id="question2" form="sheetdb-form"  spellcheck="false" name="data[2]" placeholder="Because a lot of foreign tourists visited Vietnam in 2022, ..............."></textarea>
                        </textarea>
                    </label> <br>

                    <!-- Question 3 -->
                    <label for="question3" style="margin-left: 16px;">
                        <span class="number" style="margin-bottom: 8px; margin-top: 8px;">3</span> Students are studying very hard these days so that ...............
                        <textarea id="question3" form="sheetdb-form"  spellcheck="false" name="data[3]" placeholder="Students are studying very hard these days so that ..............."></textarea>
                        </textarea>
                    </label> <br>

                </div>
                <br>
                <hr>
                <br>
                <!-- TASK 2-->
                <div id="part2">
                    <p class="passage-title">task 2 - Answer the Questions</p>
                    <p class="passage-description">Answer the following questions. Write <b>at least 2 sentences </b> for each answer. </p>
                    <!-- Question 1 -->
                    <label for="question4" style="margin-left: 16px;">
                        <span class="number" style="margin-bottom: 8px; margin-top: 8px;">4</span> What are the causes of pollution in cities?
                        <textarea id="question4" form="sheetdb-form"  spellcheck="false" name="data[4]" placeholder="Type your answer here..."></textarea>
                        </textarea>
                    </label> <br>

                    <!-- Question 2 -->
                    <label for="question5" style="margin-left: 16px;">
                        <span class="number" style="margin-bottom: 8px; margin-top: 8px;">5</span>  Do you prefer living in cities or the countryside? Why?
                        <textarea id="question5" form="sheetdb-form"  spellcheck="false" name="data[5]" placeholder="Type your answer here..."></textarea>
                        </textarea>
                    </label> <br>

                    <!-- Question 3 -->
                    <label for="question6" style="margin-left: 16px;">
                        <span class="number" style="margin-bottom: 8px; margin-top: 8px;">6</span> What should people do to stay healthy?
                        <textarea id="question6" form="sheetdb-form"  spellcheck="false" name="data[6]" placeholder="Type your answer here..."></textarea>
                        </textarea>
                    </label> <br>

                </div>
                <br>
                <hr>
                <br>
                <!-- TASK 3-->
                <div id="part3">
                    <p class="passage-title">task 3 - Translate the sentences</p>
                    <p class="passage-description">Translate the following sentences <b>into English.</b> </p>
                    <!-- Question 7 -->
                    <label for="question7" style="margin-left: 16px;">
                        <span class="number" style="margin-bottom: 8px; margin-top: 8px;">7</span> Có nhiều lí do để mọi người tin rằng học sinh nên được cho phép học môn học mà các bạn yêu thích.

                        <textarea id="question7" form="sheetdb-form"  spellcheck="false" name="data[7]" placeholder="Type your answer here..."></textarea>
                        </textarea>
                    </label> <br>

                    <!-- Question 8 -->
                    <label for="question8" style="margin-left: 16px;">
                        <span class="number" style="margin-bottom: 8px; margin-top: 8px;">8</span>  Các môn học liên quan đến khoa học và công nghệ có vai trò rất quan trọng đối với sự phát triển kinh tế và đời sống của mọi người.

                        <textarea id="question8" form="sheetdb-form"  spellcheck="false" name="data[8]" placeholder="Type your answer here..."></textarea>
                        </textarea>
                    </label> <br>

                    <!-- Question 9 -->
                    <label for="question9" style="margin-left: 16px;">
                        <span class="number" style="margin-bottom: 8px; margin-top: 8px;">9</span> Khi có nhiều du khách đến một địa điểm, tiền thu được từ các hoạt động du lịch có thể được tái đầu tư vào các lĩnh vực khác.

                        <textarea id="question9" form="sheetdb-form"  spellcheck="false" name="data[9]" placeholder="Type your answer here..."></textarea>
                        </textarea>
                    </label> <br>
                    
                    <!-- Question 10 -->
                    <label for="question10" style="margin-left: 16px;">
                        <span class="number" style="margin-bottom: 8px; margin-top: 8px;">10</span> Quảng cáo có thể ảnh hưởng nhiều đến hành vi tiêu dùng của khách hàng bởi vì quảng cáo chưa nhiều thông tin về tính năng của sản phẩm.

                        <textarea id="question10" form="sheetdb-form"  spellcheck="false" name="data[10]" placeholder="Type your answer here..."></textarea>
                        </textarea>
                    </label> <br>
                </div>
            </div>

                

                       
              
        </section>

    </section>
      
    <!-- FOOTER -->
        <footer class="footer">
            <div class="footer-container">
                <div class="part-group-btn">
                    <a href="#part1">
                        <button class="button">
                            Task 1
                        </button>
                    </a>
                    <a href="#part2">
                        <button class="button">
                            Task 2
                        </button>
                    </a>  
                    <a href="#part3">
                        <button class="button">
                            Task 3
                        </button>
                    </a>  
                </div>
    
                <div class="submit-group-btn">
                        <button class="button" type="submit" form="sheetdb-form"> 
                            <img class="icon" src="assets/icon/submit.svg" alt="">
                            <span> Submit</span>
                        </button>
                    </div>
                    
                </div>
            </div>
            
        </footer>



<script>

     // SUMBIT ANSWER
     var form = document.getElementById('sheetdb-form');
        form.addEventListener("submit", e => {
            
            e.preventDefault();
            // Submit time
            $("#time").val(new Date()); 

            fetch(form.action, {
                method: "POST",
                body: new FormData(document.getElementById("sheetdb-form")),
            }).then(
                response => response.json()
            ).then((html) => {
                // you can put any JS code here
                // alert('Your answers have been submitted successfully')
                 // Pause the audio and show completed noti
                document.getElementById("completed").className = "show"
            });
        });


    // SMOOTH SCROLL 
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
            
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
                });
            });
        }
        );
        

    // CHANGE PALETTE COLOR WHEN CHECKED
    $("input[type=radio]").on('change', function () {
            name = $(this).attr("name"); //name = data[1]
            palleteItem = document.getElementById(name);
            palleteItem.classList.add("change");
            palleteItem.classList.remove("default");
    });

    $("input[type=input]").on('change', function () {
            name = $(this).attr("name"); //name = data[1]
            palleteItem = document.getElementById(name);
            palleteItem.classList.add("change");
            palleteItem.classList.remove("default");
    });

    $("select").on('change', function () {
            name = $(this).attr("name"); //name = data[1]
            palleteItem = document.getElementById(name);
            palleteItem.classList.add("change");
            palleteItem.classList.remove("default");
    });

    // AUTO CREATE PALETTE
    function initPalleteItems() {
            for(var i=1; i<=40; i++){
                $(".palette").append(`
                <div id="data[${i}]" class="grid-item default">
                    <a href="#question${i}" >${i}</a>
                </div>`
                )
            }
        }
    initPalleteItems(); 



    // SHOW and HIDE LIST WHEN CLICK ON LIST BUTTON
    function showlist() {
        var x = document.getElementById("sidenav");
        var isShow = x.getAttribute('data-is-show');
            if (isShow == 0 ) {
                x.setAttribute("data-is-show", "1");
                // document.getElementById("sidenav").style.width = "372px";
                document.getElementById("sidenav").style.marginRight = "0px";
                document.getElementById("content").style.marginRight = "280px";
            } else {
                x.setAttribute("data-is-show", "0");
                // document.getElementById("sidenav").style.width = "0";
                document.getElementById("sidenav").style.marginRight = "-280px";
                document.getElementById("content").style.marginRight = "-6px";
            }
         };


    // START BAR
    $("#confirm-start").on('click', function () {
            $(this).parents("#confirm-start").fadeOut();
        });

            $("#timeout").on('click', function () {
            $("#timeout").removeClass("hide").addClass("show");
        });




    // CHECK PASSWORD
            // Get references to the elements you'll be working with
            var input = document.getElementById("password");
            var div = document.getElementById("HIDDENDIV");
            var btn = document.getElementById("startbtn");

            // Set up event handlers in JavaScript
            startbtn.addEventListener("click", validate);

            function validate(){
            if (input.value == 'A4IODHCR') { 
                // No need to add a "show" class. Just remove the "hidden" class.
                $(this).parents("#confirm-start").fadeOut();

                // TIMER
                var presentTimeEl = document.getElementById('timer');
                    let timeArray = presentTimeEl.innerText.split(/[:]+/);
                    var min = timeArray[0];
                    var sec = timeArray[1];

                    function startTimer() {
                        sec--;
                        if (sec < 10 && sec >= 0) { sec = "0" + sec };
                        if (sec < 0) { sec = 59 };
                        if (sec == 59) {
                            min--;
                        }
                        if (min.toString().length == 1) {
                            min = '0' + min;
                        }
                        console.log(min.length)
                        presentTimeEl.innerText = min + ":" + sec;
                        if (min < 0) {
                            clearInterval(countdown);
                            console.log('end')
                            presentTimeEl.innerText = "Time out!";


                            // Auto submit when timeout
                            var form = document.getElementById('sheetdb-form');
                                 // Submit time
                                 $("#time").val(new Date()); 
                                    fetch(form.action, {
                                        method: "POST",
                                        body: new FormData(document.getElementById("sheetdb-form")),
                                    }).then(
                                        response => response.json()
                                    ).then((html) => {
                                        // you can put any JS code here
                                        // Pause the audio and show timeout noti

                                        document.getElementById("timeout").className = "show";
                                       
                                    });
                            ;
                        }
                    }
                    var countdown = setInterval(startTimer, 1000);
                    
                  
            } else {  
                password.focus(); // <-- If you don't do this first, your select code won't work
                password.setSelectionRange(0, password.value.length);   
                alert('Invalid Password!'); 
            }
            };
        
</script>

</body>
</html>